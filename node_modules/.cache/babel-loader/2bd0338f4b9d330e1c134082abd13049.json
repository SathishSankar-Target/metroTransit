{"ast":null,"code":"import _regeneratorRuntime from\"/Users/a6002489/Desktop/Sathish/caseStudy/metroTransit/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/a6002489/Desktop/Sathish/caseStudy/metroTransit/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/a6002489/Desktop/Sathish/caseStudy/metroTransit/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/a6002489/Desktop/Sathish/caseStudy/metroTransit/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/a6002489/Desktop/Sathish/caseStudy/metroTransit/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/a6002489/Desktop/Sathish/caseStudy/metroTransit/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/a6002489/Desktop/Sathish/caseStudy/metroTransit/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./App.css';import{fetchApi}from'./apiCalls';import DepartureList from'./departureList';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.handleRoutChange=function(event){var value=event.target.value;_this.setState({showDirection:false,direction:[],selectedRoute:'',showStop:false,departureList:[],showDepartureList:false});if(value!=='Select route'){fetchApi('directions/'+value).then(function(direction){return _this.setState({direction:direction,showDirection:true,selectedRoute:value});});}};_this.handleDirectionChange=function(event){var value=event.target.value;_this.setState({showStop:false,stop:[],selectedDirection:'',departureList:[],showDepartureList:false});if(value!=='Select direction'){fetchApi('stops/'+_this.state.selectedRoute+'/'+value).then(function(direction){return _this.setState({stop:direction,showStop:true,selectedDirection:value});});}};_this.handleStopChange=function(event){var value=event.target.value;_this.setState({showDepartureList:false,departureList:[]});if(value!=='Select stop'){fetchApi(_this.state.selectedRoute+'/'+_this.state.selectedDirection+'/'+value).then(function(departureList){return _this.setState({departureList:departureList,showDepartureList:true,selectedStop:value});});}};_this.updateDepartureData=_this.updateDepartureData.bind(_assertThisInitialized(_this));_this.state={routes:[],selectedRoute:'',direction:[],selectedDirection:'',stop:[],selectedStop:'',showDirection:false,showStop:false,departureList:[],showDepartureList:false,showRouteSelection:true,showStopSelection:false};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetchApi('routes').then(function(routes){return _this2.setState({routes:routes});});setInterval(this.updateDepartureData,60000);}// Makes the call every 1 min only when there is selectedRoute, selectedDirection, selectedStop\n},{key:\"updateDepartureData\",value:function updateDepartureData(){var _this3=this;var query;return _regeneratorRuntime.async(function updateDepartureData$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.state.selectedRoute!==''&&this.state.selectedDirection!==''&&this.state.selectedStop!==''){query=this.state.selectedRoute+'/'+this.state.selectedDirection+'/'+this.state.selectedStop;fetchApi(query).then(function(departureList){return _this3.setState({departureList:departureList});});}case 1:case\"end\":return _context.stop();}}},null,this);}// Makes the call to get the direction select box data and set/change some default state values\n},{key:\"render\",value:function render(){var _this4=this;var state=this.state;var routeData=state.routes;var directionData=state.direction;var stopData=state.stop;var departureList=state.departureList;// const { routeData, directionData, stopData, departureList } = state\nreturn React.createElement(\"div\",{className:\"App\"},React.createElement(\"h2\",{className:\"page-title\"},\"Real-time Departures\"),React.createElement(\"div\",{className:\"select-box-container\"},routeData.length?React.createElement(\"select\",{className:\"select-box\",onChange:function onChange(e){return _this4.handleRoutChange(e);}},React.createElement(\"option\",null,\"Select route\"),routeData.map(function(route){return React.createElement(\"option\",{key:route.RouteId,value:route.RouteId},route.Description);})):React.createElement(\"div\",null,\"We are unable to get the desired route option for you to select, Kindly try again after some time\"),state.showDirection&&directionData&&React.createElement(\"select\",{className:\"select-box\",onChange:function onChange(e){return _this4.handleDirectionChange(e);}},React.createElement(\"option\",null,\"Select direction\"),directionData.map(function(direction){return React.createElement(\"option\",{key:direction.DirectionId,value:direction.DirectionId},direction.DirectionName);})),state.showStop&&stopData&&React.createElement(\"select\",{className:\"select-box\",onChange:function onChange(e){return _this4.handleStopChange(e);}},React.createElement(\"option\",null,\"Select stop\"),stopData.map(function(stop){return React.createElement(\"option\",{key:stop.PlaceCode,value:stop.PlaceCode},stop.Description);}))),state.showDepartureList&&React.createElement(DepartureList,{departureList:departureList}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/a6002489/Desktop/Sathish/caseStudy/metroTransit/src/App.js"],"names":["React","Component","fetchApi","DepartureList","App","props","handleRoutChange","event","value","target","setState","showDirection","direction","selectedRoute","showStop","departureList","showDepartureList","then","handleDirectionChange","stop","selectedDirection","state","handleStopChange","selectedStop","updateDepartureData","bind","routes","showRouteSelection","showStopSelection","setInterval","query","routeData","directionData","stopData","length","e","map","route","RouteId","Description","DirectionId","DirectionName","PlaceCode"],"mappings":"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","sourcesContent":["import React , { Component }from 'react';\nimport './App.css';\nimport {fetchApi} from './apiCalls'\nimport DepartureList from './departureList'\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.updateDepartureData = this.updateDepartureData.bind(this)\n    this.state = {\n      routes : [],\n      selectedRoute: '',\n      direction: [],\n      selectedDirection: '',\n      stop: [],\n      selectedStop: '',\n      showDirection: false,\n      showStop: false,\n      departureList: [],\n      showDepartureList: false,\n      showRouteSelection: true,\n      showStopSelection: false\n    }\n  }\n\n  componentDidMount() {\n    fetchApi('routes').then(routes => this.setState({routes :routes }))\n    setInterval(this.updateDepartureData, 60000)\n  }\n  // Makes the call every 1 min only when there is selectedRoute, selectedDirection, selectedStop\n  async updateDepartureData() {\n    if(this.state.selectedRoute !== '' && this.state.selectedDirection !== '' && this.state.selectedStop !== '') {\n      const query = this.state.selectedRoute+'/'+this.state.selectedDirection+'/'+this.state.selectedStop\n      fetchApi(query).then(departureList => this.setState({departureList: departureList}))\n    }\n  }\n\n  // Makes the call to get the direction select box data and set/change some default state values\n  handleRoutChange = (event) => {\n    let value = event.target.value\n    this.setState({\n      showDirection: false,\n      direction: [],\n      selectedRoute:'',\n      showStop: false,\n      departureList: [],\n      showDepartureList: false,\n    })\n    if (value !== 'Select route') {\n      fetchApi('directions/'+value)\n      .then(direction => this.setState({direction :direction, showDirection: true, selectedRoute: value }))\n    } \n  }\n\n  // Makes the call to get the stop select box data and set/change some default state values\n  handleDirectionChange = (event) => {\n    let value = event.target.value\n    this.setState({\n      showStop: false,\n      stop: [],\n      selectedDirection: '',\n      departureList: [],\n      showDepartureList: false,\n    })\n    if (value !== 'Select direction') {\n      fetchApi('stops/'+this.state.selectedRoute+'/'+value)\n      .then(direction => this.setState({stop :direction, showStop: true, selectedDirection: value }))\n    } \n  }\n\n  // Makes the call to get the list departure data and set/change some default state values\n  handleStopChange = (event) => {\n    let value = event.target.value\n    this.setState({\n      showDepartureList: false,\n      departureList: []\n    })\n    if (value !== 'Select stop') {\n      fetchApi(this.state.selectedRoute+'/'+this.state.selectedDirection+'/'+value)\n      .then(departureList => this.setState({departureList: departureList, showDepartureList: true, selectedStop: value}))\n    } \n  }\n\n  render() {\n    const state = this.state\n    const routeData = state.routes \n    const directionData = state.direction\n    const stopData = state.stop\n    const departureList = state.departureList\n    // const { routeData, directionData, stopData, departureList } = state\n    return (\n      <div className=\"App\">\n        <h2 className=\"page-title\">Real-time Departures</h2>\n        <div className=\"select-box-container\">\n        {/* Select the route select box */}\n        { routeData.length ? \n          <select className=\"select-box\" onChange={(e) => this.handleRoutChange(e)}>\n            <option>Select route</option>\n            { routeData.map(route => <option key={route.RouteId} value={route.RouteId}>{route.Description}</option>)}\n          </select> :\n          <div>We are unable to get the desired route option for you to select, Kindly try again after some time</div> }\n        {/* Select the direction select box */}\n        { (state.showDirection && directionData) &&\n          <select className=\"select-box\" onChange={(e) => this.handleDirectionChange(e)}>\n            <option>Select direction</option>\n            { directionData.map(direction => <option key={direction.DirectionId} value={direction.DirectionId}>{direction.DirectionName}</option>)}\n          </select>\n        }\n        {/* Select the stop select box */}\n        { (state.showStop && stopData) &&\n          <select className=\"select-box\" onChange={(e) => this.handleStopChange(e)}>\n            <option>Select stop</option>\n            { stopData.map(stop => <option key={stop.PlaceCode} value={stop.PlaceCode}>{stop.Description}</option>)}\n          </select>\n        }\n        </div>\n        {/* Departure list along with the stop description and stop id */}\n        { state.showDepartureList && <DepartureList departureList = {departureList} /> }\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}