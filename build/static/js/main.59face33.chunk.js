(this.webpackJsonpmetrotransit=this.webpackJsonpmetrotransit||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),s=a.n(o),i=(a(16),a(10)),c=a.n(i),u=a(1),l=a(2),p=a(5),d=a(4),h=a(3),m=a(6),D=(a(8),function(e){return fetch("https://svc.metrotransit.org/nextripv2/"+e).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e),e}))}),f=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).showMoreDeparture=function(){3===a.state.departureCountToShow?a.setState({departureCountToShow:a.props.departureList.Departures.length,departureExpanded:!0}):a.setState({departureCountToShow:3,departureExpanded:!1})},a.timeDiff=function(e){return new Date(e)-new Date<3e5},a.state={departureCountToShow:3,departureExpanded:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.departureList;return r.a.createElement("div",{className:"departure-container"},void 0!==t.Stop&&void 0!==t.Departures?r.a.createElement("div",null,r.a.createElement("div",{className:"departure"},r.a.createElement("h2",{className:"departure-title"},"Departures"),r.a.createElement("div",{className:"stop-description"},r.a.createElement("div",null,t.Stop.Description),r.a.createElement("div",null,"Stop ",t.Stop.StopId))),r.a.createElement("div",{role:"list"},t.Departures.slice(0,this.state.departureCountToShow).map((function(t){return r.a.createElement("div",{className:"departure-list",key:t.BlockNumber},r.a.createElement("div",{className:"route-discription"},r.a.createElement("span",{className:"route-id"},r.a.createElement("strong",null,t.RouteId)),r.a.createElement("span",null,t.Description)),r.a.createElement("div",{className:"depart-time"},e.timeDiff(t.DepartureTime)&&r.a.createElement("span",{className:"blink"}),r.a.createElement("strong",null,t.DepartureText)))}))),t.Departures.length>3&&r.a.createElement("button",{className:"show-more-button",onClick:this.showMoreDeparture},r.a.createElement("span",{className:this.state.departureExpanded?"expand":"colapsed"}),"Show ",this.state.departureExpanded?"less":"more"," departure time")):r.a.createElement("div",null,"We are unable to get the desired direction for your select, Kindly try chaning the option for the route, direction and stop"))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleRoutChange=function(e){var t=e.target.value;a.setState({showDirection:!1,direction:[],selectedRoute:"",showStop:!1,departureList:[],showDepartureList:!1}),"Select route"!==t&&D("directions/"+t).then((function(e){return a.setState({direction:e,showDirection:!0,selectedRoute:t})}))},a.handleDirectionChange=function(e){var t=e.target.value;a.setState({showStop:!1,stop:[],selectedDirection:"",departureList:[],showDepartureList:!1}),"Select direction"!==t&&D("stops/"+a.state.selectedRoute+"/"+t).then((function(e){return a.setState({stop:e,showStop:!0,selectedDirection:t})}))},a.handleStopChange=function(e){var t=e.target.value;a.setState({showDepartureList:!1,departureList:[]}),"Select stop"!==t&&D(a.state.selectedRoute+"/"+a.state.selectedDirection+"/"+t).then((function(e){return a.setState({departureList:e,showDepartureList:!0,selectedStop:t})}))},a.updateDepartureData=a.updateDepartureData.bind(Object(h.a)(a)),a.state={routes:[],selectedRoute:"",direction:[],selectedDirection:"",stop:[],selectedStop:"",showDirection:!1,showStop:!1,departureList:[],showDepartureList:!1,showRouteSelection:!0,showStopSelection:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;D("routes").then((function(t){return e.setState({routes:t})})),setInterval(this.updateDepartureData,6e4)}},{key:"updateDepartureData",value:function(){var e,t=this;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:""!==this.state.selectedRoute&&""!==this.state.selectedDirection&&""!==this.state.selectedStop&&(e=this.state.selectedRoute+"/"+this.state.selectedDirection+"/"+this.state.selectedStop,D(e).then((function(e){return t.setState({departureList:e})})));case 1:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.routes,n=t.direction,o=t.stop,s=t.departureList;return r.a.createElement("div",{className:"App"},r.a.createElement("h2",{className:"page-title"},"Real-time Departures"),r.a.createElement("div",{className:"select-box-container"},a.length?r.a.createElement("select",{className:"select-box",onChange:function(t){return e.handleRoutChange(t)}},r.a.createElement("option",null,"Select route"),a.map((function(e){return r.a.createElement("option",{key:e.RouteId,value:e.RouteId},e.Description)}))):r.a.createElement("div",null,"We are unable to get the desired route option for you to select, Kindly try again after some time"),t.showDirection&&n&&r.a.createElement("select",{className:"select-box",onChange:function(t){return e.handleDirectionChange(t)}},r.a.createElement("option",null,"Select direction"),n.map((function(e){return r.a.createElement("option",{key:e.DirectionId,value:e.DirectionId},e.DirectionName)}))),t.showStop&&o&&r.a.createElement("select",{className:"select-box",onChange:function(t){return e.handleStopChange(t)}},r.a.createElement("option",null,"Select stop"),o.map((function(e){return r.a.createElement("option",{key:e.PlaceCode,value:e.PlaceCode},e.Description)})))),t.showDepartureList&&r.a.createElement(f,{departureList:s}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){}},[[11,1,2]]]);
//# sourceMappingURL=main.59face33.chunk.js.map